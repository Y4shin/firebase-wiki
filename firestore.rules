rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /counter/{countItem} {
      allow read;
      allow write: if false;
    }
    match /categories/{categoryId} {
      allow read;
      allow write: if false;
    }
    match /profile/{userId} {
      allow read;
      allow write: if auth != null && auth.uid == userId;
    }
    match /'wiki-page'/{pageId} {
      allow read;
      allow write: if auth != null && auth.uid == get(/databases/{database}/documents/'wiki-page'/$(pageId)).author;
    }
    match /'wiki-page'/{pageId}/revision/{revisionId} {
      allow read;
      allow write: if auth != null && auth.uid == get(/databases/{database}/documents/'wiki-page'/$(pageId)).author;
    }
    match /tag/{tagId} {
      allow read;
      allow write: if false;
    }
  }
}